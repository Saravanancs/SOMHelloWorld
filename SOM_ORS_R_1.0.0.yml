# Maven
# Build your Java project and run tests with Apache Maven.
# Add steps that analyze code, save build artifacts, deploy, and more:
# https://docs.microsoft.com/azure/devops/pipelines/languages/java
##### Setting Build No #####
name: $(BuildDefinitionName)$(Rev:.r)

trigger:
- main

##### Setting Stages #####
stages:
- stage: 'BuildStage'
  displayName: 'SOM ORS Build Pipeline'
  jobs:
    - job: 'BuildProcess'
      displayName: 'Build Process Job'
      pool:
        vmImage: 'windows-latest'        
        #name: 'Default'
        #demands:
        #- agent.name -equals 'SOMAgentForJava'
      steps:
        - script: echo Hello, world!
          displayName: 'Setting up Agent Configuration'
        - task: Maven@3
          inputs:
            mavenPomFile: 'pom.xml'
            javaHomeOption: 'JDKVersion'
            mavenVersionOption: 'Default'
            mavenAuthenticateFeed: false
            effectivePomSkip: false
            sonarQubeRunAnalysis: false
            publishJUnitResults: false
            testResultsFiles: '**/surefire-reports/TEST-*.xml'
            #goals: 'integration-test -DskipIntegrationTests=false -Dmaven.test.failure.ignore=true'
            